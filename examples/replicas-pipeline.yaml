apiVersion: dataflow.argoproj.io/v1alpha1
kind: Pipeline
metadata:
  annotations:
    dataflow.argoproj.io/description: |
      This example shows a example of having multiple replicas of a single node.

      As each node correspondes to a deployment, this will be the number of replicas (i.e. pods) for the deployment.

      The same message  will not be send to two different replicas.

      This allows you to scale up to process more messages.

      You can also use `kubectl scale replicas pipeline-${pipelineName}-${nodeName} --replicas 4`.
    dataflow.argoproj.io/name: Using replicas to scale
  creationTimestamp: null
  name: replicas
spec:
  nodes:
  - image: argoproj/dataflow-cat:latest
    imagePullPolicy: IfNotPresent
    in:
      http: {}
    name: main
    out:
      http: {}
    replicas:
      value: 4
    resources: {}
    sinks:
    - kafka:
        topic: output-topic
    sources:
    - kafka:
        topic: input-topic
