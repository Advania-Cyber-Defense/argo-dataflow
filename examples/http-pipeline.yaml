apiVersion: dataflow.argoproj.io/v1alpha1
kind: Pipeline
metadata:
  name: http
  annotations:
    dataflow.argoproj.io/name: Using HTTP for input and output
    dataflow.argoproj.io/description: |
      This examples using the `dataflow-cat` image to send and recieve messages using HTTP.

      To recieve a message, you must expose a HTTP endpoint on http://localhost:8080/messages. Each message will
      be passed as the body of a single HTTP POST request.

      To send a message, send a HTTP post to http://localhost:3569/messages.

      Example implementations:

      * Go: ../cat/main.go
spec:
  nodes:
    - name: main
      sources:
        - kafka:
            url: kafka-0.broker.kafka.svc.cluster.local:9092
            topic: input-topic
      in:
        http: { }
      image: argoproj/dataflow-cat:latest
      imagePullPolicy: IfNotPresent
      out:
        http: { }
      sinks:
        - kafka:
            url: kafka-0.broker.kafka.svc.cluster.local:9092
            topic: output-topic
